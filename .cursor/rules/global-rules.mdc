---
alwaysApply: true
---
# ======================================================
# GLOBAL PROJECT RULES — Client (React) + Server (NestJS)
# ======================================================

project_name: WEB AD Tools
description: >
  Полноценное приложение для поиска людей в Active Directory и блокировке или раблокировке когда острудник уходит в отпуск, стажировку, декрет, командировка и т.д. Отслеживание данного процесса ведение статистики.

  Клиентская часть на React (JS), серверная — NestJS (GraphQL + Prisma + PostgreSQL).
  Авторизация через JWT и LDAP. UI построен на Ant Design, стили постепенно переводятся на styled-components.

# =========================
# GENERAL DEVELOPMENT STYLE
# =========================
developer_level: junior
ai_behavior:
  - Всегда объясняй логику кода простыми словами, как наставник.
  - После каждого примера кода добавляй краткое объяснение ("почему именно так").
  - Если можно сделать короче или проще — делай.
  - Показывай примеры с правильными импортами и готовым кодом, без пропусков.
  - Не используй TypeScript (проект на чистом JS).
  - Не сокращай комментарии — добавляй короткие пояснения над каждым важным блоком.

# =====================
# FRONTEND (React Rules)
# =====================
frontend_framework: React 18
language: JavaScript (no TypeScript)
style_guide:
  - Использовать Ant Design компоненты и их Layout-систему.
  - Переходить с CSS-файлов на styled-components.
  - Не использовать inline-стили, только если это не 2-3 параметра.
  - Каждый компонент должен быть функциональным (function Component).
  - Использовать хуки useState, useEffect, useMemo, useCallback по необходимости.
  - Не использовать классовые компоненты.
  - Разделять крупные компоненты на мелкие логические блоки.
  - Все бизнес-операции выносить в hooks/ или services/.
  - Все запросы к серверу — через Apollo Client (GraphQL).
  - Все UI-элементы должны быть отзывчивыми (responsive).
  - Поддерживать читаемую структуру JSX (вложенность максимум 3 уровня).
  - Использовать camelCase для переменных и PascalCase для компонентов.
  - Не использовать var.

folder_structure:
  - src/
    - assets/
    - context/            # провайдеры контекста (auth, сообщения)
    - services/           # клиенты/интеграции (apollo)
    - query/              # GraphQL запросы (GqlQuery, RecallQuery, ...)
    - pages/
      - login/
      - home/
        - components/
          - layout/
          - schedule/
          - schedule-statistics/
          - service-settings/
          - user/
            - forms/
              - onetime/
    - App.jsx
    - main.jsx
    - index.
  - public/  

# =========================
# BACKEND (NestJS + GraphQL)
# =========================
backend_framework: NestJS
database: PostgreSQL
orm: Prisma
api_type: GraphQL
auth: JWT + LDAP
backend_rules:
  - Все запросы на клиент должны выполняться через Apollo Client.
  - Данные приходят из GraphQL схем (typeDefs, resolvers).
  - Prisma используется только в сервисах.
  - Не трогать автоматически сгенерированные Prisma файлы.
  - Использовать DTO, Guards и Interceptors по стандарту NestJS.
  - Пароли и ключи не должны попадать в код (использовать .env).
  - Все ответы должны быть типизированы схемами GraphQL (type Query, Mutation).

# =========================
# AUTH & SECURITY
# =========================
auth_rules:
  - Авторизация через JWT-токен, получаемый от сервера после LDAP логина.
  - Клиент хранит токен в localStorage.
  - Все защищённые страницы проверяют наличие JWT.
  - При истечении токена — перенаправлять на /login.
  - Все GraphQL запросы должны добавлять Authorization header: "Bearer <token>".
  - Не хранить пароли нигде в клиентском коде.
  - В сервере шифровать токены и резервировать данные БД.

# =========================
# STYLING & DESIGN SYSTEM
# =========================
ui_framework: Ant Design
styling_rules:
  - Использовать styled-components для всех новых компонентов.
  - Переходить от CSS к styled-components постепенно (одна страница за раз).
  - Цветовая палитра и отступы должны соответствовать темам Ant Design.
  - Для адаптивности использовать Grid и Flex из Ant Design.
  - Избегать дублирования CSS — выносить повторяющиеся стили в отдельные styled-компоненты.
  - Компоненты должны быть визуально чистыми и минималистичными.
  - Если видишь плохую реализацю кода что делалась раньше предложи исправить.

# =========================
# CODE QUALITY & COMMENTS
# =========================
quality_rules:
  - Добавлять комментарии к ключевым участкам кода.
  - Писать читаемые названия функций и переменных.
  - Не оставлять "магических чисел" — выносить в константы.
  - Каждый новый компонент должен содержать описание сверху в виде JSDoc-комментария.
  - AI должен помогать оптимизировать код, но не усложнять.

# =========================
# COMMITS & DOCUMENTATION
# =========================
commit_style:
  - Использовать Conventional Commits:
    - feat: добавлена новая функциональность
    - fix: исправлена ошибка
    - refactor: улучшение кода
    - style: изменение вёрстки
    - docs: документация
    - chore: мелкие изменения, конфигурация
  - Все коммиты должны быть на английском языке.

docs_rules:
  - Документация в Markdown (`README.md`, `ARCHITECTURE.md`).
  - Краткие инструкции по запуску клиента и сервера.
  - Примеры GraphQL-запросов и мутаций.
  - Объяснение авторизации через JWT + LDAP.

# =========================
# AI BEHAVIOR (для Cursor)
# =========================
ai_behavior_advanced:
  - Если запрос связан с React — писать JSX-код полностью, без сокращений.
  - Всегда показывать рабочие примеры кода, не псевдо.
  - Давать практические советы по оптимизации и архитектуре.
  - Если запрос не ясен — уточнять перед ответом.
  - В случае ошибок — объяснять, как их исправить.
  - Объяснять понятия и решения, как опытный наставник junior-разработчику.
